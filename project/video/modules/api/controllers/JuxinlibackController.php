<?php
/**
 * 易宝一键支付回调接口 内部错误码范围2800-2899
 * 易宝投资通回调接口 内部错误码范围2900-2999
 */
namespace app\modules\api\controllers;

use app\common\ApiServerCrypt;
use app\common\Http;
use app\models\App;
use app\models\JxlRequestModel;
use app\models\JxlStat;
use app\modules\api\common\ApiController;
use app\modules\api\common\juxinli\JxlRequest;

class JuxinlibackController extends ApiController {
    public function init() {
        //parent::init(); 千万不要执行父类的验证方法
    }

    /**
     * 回调
     */
    public function actionCallurl() {
        // 1 保存回调的数据
        $jsonString = $this->post('data');
        //$this->dayLog('juxinliback', 'original', $jsonString);
        // 2 数据校验
        if (!SYSTEM_PROD) {
            //仅用于测试
            //$jsonString = $this->testdata();// @todo
        }

        $data = json_decode($jsonString, true);
        if (!is_array($data)) {
            return json_encode(["code" => "400", "note" => "json数据解析为空"]);
        }

        //3 获取必备参数
        $requestid = isset($data['LOAN_APP_ID']) ? $data['LOAN_APP_ID'] : 0;
        //$name = isset($data['CUST_NAME']) ? $data['CUST_NAME'] : '';
        //$idcard = isset($data['APP_IDCARD_NO']) ? $data['APP_IDCARD_NO'] : '';
        $phone = isset($data['APP_PHONE_NO']) ? $data['APP_PHONE_NO'] : '';

        if (!$phone) {
            return json_encode(["code" => "400", "note" => "json数据没有手机号"]);
        }
        if (!$requestid) {
            return json_encode(["code" => "400", "note" => "LOAN_APP_ID不存在"]);
        }

        // 若结果为空那么重新获取
        if (!isset($data['JSON_INFO']) || empty($data['JSON_INFO'])) {
            $this->dayLog('juxinliback', 'report_info', 'is empty', $requestid, $jsonString);
            return json_encode(["code" => "400", "note" => "JSON_INFO为空"]);
        }

        //4 查询数据库模型
        $oModel = JxlRequestModel::findOne($requestid);
        if (!$oModel) {
            $this->dayLog('juxinliback', 'JxlRequestModel', 'is empty', $requestid, $jsonString);
            return json_encode(["code" => "400", "note" => "没有纪录"]);
        }
        //zhangfei新加同步状态码
        $oModel->process_code = '10008';
        $oModel->save();

        //5 保存到文件中
        $oJxlStat = (new JxlStat)->getByRequestid($requestid);
        if (!$oJxlStat) {
            $oJxlStat = new JxlStat;
        }

        //zhangfei新增过滤
        /*$oHistory = $oJxlStat->getHistoryNew($oModel->phone);
        if ($oHistory) {
            $this->dayLog('juxinliback', 'JxlStat', '数据已有', $requestid);
            return json_encode(["code" => "400", "note" => "JSON数据已有"]);
        }*/

        $url = $oJxlStat->saveJson($requestid, $jsonString);

        //4 组合数据
        $postData = [
            'aid' => $oModel->aid,
            'requestid' => $oModel->id,
            'name' => $oModel->name,
            'idcard' => $oModel->idcard,
            'phone' => $oModel->phone,
            'website' => $oModel->website,
            'url' => $url,
            'source' => $oModel->source,
        ];

        //5 保存到DB中
        $result = $oJxlStat->saveStat($postData);
        if (!$result) {
            $this->dayLog('juxinliback', 'saveStat', '保存失败', $postData);
            return json_encode(["code" => "400", "note" => "保存成功"]);
        }

        //6 保存详情
        $jxlRequest = new JxlRequest($oModel->source);
        $details = $jxlRequest->accessRawDataByToken($oModel->token, $oModel->website, true);

        $detailurl = str_replace(".json", "_detail.json", $url);
        $oJxlStat->saveDetail($detailurl, $details);

        // 6 返回数据
        return json_encode([
            "code" => "200",
            "note" => "接收成功",
        ]);
    }
    /**
     * 废弃
     */
    private function actionCallurl2222() {
        // 1 保存回调的数据
        $this->dayLog(
            'juxinliback',
            'actionCallurl',
            '获取的数据', $this->post()
        );

        $data = $this->post('data');
        // 2 数据校验
        //$data = $this->testdata();// @todo
        $result = json_decode($data, true);
        if (!is_array($result)) {
            echo json_encode([
                "code" => "400",
                "note" => "json数据解析为空",
            ]);
            exit;
        }
        $loan_app_id = $result['LOAN_APP_ID'];
        if (empty($loan_app_id)) {
            echo json_encode([
                "code" => "400",
                "note" => "LOAN_APP_ID 为空",
            ]);
            exit;
        }

        // 3 获取手机通话纪录
        $jxlRequestModel = new \app\models\JxlRequestModel();

        $oModel = $jxlRequestModel->getById($loan_app_id);
        if (empty($oModel)) {
            $this->dayLog(
                'juxinliback',
                'actionCallurl',
                "没有找到指定的数据", $loan_app_id
            );
            echo json_encode([
                "code" => "400",
                "note" => "没有找到指定的数据",
            ]);
            exit;
        }

        $calls = $jxlRequestModel->queryDataFromJxl($loan_app_id);
        if (!is_array($calls)) {
            $this->dayLog(
                'juxinliback',
                'actionCallurl',
                $jxlRequestModel->errinfo
            );
            echo json_encode([
                "code" => "400",
                "note" => "同步查询无结果",
            ]);
            exit;
        }

        // 3. 返回正确结果
        $this->doPost($oModel, [
            'requestid' => $loan_app_id,
            'calls' => $calls,
        ]);

        // 4 返回数据
        echo json_encode([
            "code" => "200",
            "note" => "接收成功",
        ]);
        exit;
    }

    /**
     * 废弃 post后台异步通知
     * @param $orderModel tzt和wrap均使用此方法,故传递这个用以区分
     */
    private function doPost($oModel, $res_data) {
        $res_data = $this->encryptData($oModel->aid, $res_data);
        $postData = ['res_data' => $res_data, 'res_code' => 0];
        $hostMap = null; //['www.test.com'=>'127.0.0.1'];// @todo
        if ($oModel->callbackurl) {
            $result = Http::curlByHost($oModel->callbackurl, $postData, $hostMap);
            // 若客户端也返回成功，则返回易宝成功状态.
            if ($result == 'SUCESS') {
                $oModel->client_status = 1;
                $oModel->save();
                echo 'SUCCESS';
            }
        }
        exit;
    }

    private function testdata() {

        $jsonString = '{"APP_IDCARD_NO":"420381199610053956","APP_PHONE_NO":"13581524051","LOAN_APP_ID":"1","CUST_NAME":"潘亮"}';

        // return $jsonString;
        $d = array(
            'data' => '{"APP_IDCARD_NO":"320103199308042318","APP_PHONE_NO":"13581524051","JSON_INFO":{"contact_list":[{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01010109009","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":0,"contact_afternoon":1,"call_len":0.7333333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.7333333333333333,"contact_all_day":false,"contact_morning":0,"contact_weekend":1},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01052890576","contact_name":"猎头","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"招聘","contact_weekday":1,"contact_afternoon":1,"call_len":0.15,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.15,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01052926669","contact_name":"崔老师","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"招聘","contact_weekday":1,"contact_afternoon":1,"call_len":0.5,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.5,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01056602391","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":2.783333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":2.783333333333333,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":1,"contact_1w":0,"p_relation":"","phone_num":"01056603099","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":0.5166666666666667,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.5166666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01059661551","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":3.466666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":3.466666666666667,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01060641216","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":0.5,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.5,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01062726168","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":0.55,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.55,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01081375781","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.2833333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.2833333333333333,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01082903605","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":1,"needs_type":"未知","contact_weekday":0,"contact_afternoon":1,"call_len":0.16666666666666666,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.16666666666666666,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01088631433","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.25,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.25,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01089395032","contact_name":"骚扰电话","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"骚扰电话","contact_weekday":1,"contact_afternoon":0,"call_len":0.2,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.2,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":1,"p_relation":"","phone_num":"01089395149","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":0.16666666666666666,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.16666666666666666,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"01089941649","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":0.75,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.75,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"广东","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"02038889641","contact_name":"猎头","call_in_cnt":2,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"招聘","contact_weekday":2,"contact_afternoon":2,"call_len":0.9333333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":2,"call_cnt":2,"call_in_len":0.9333333333333333,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"未知","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"096138","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":0,"contact_afternoon":0,"call_len":0.48333333333333334,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.48333333333333334,"contact_all_day":false,"contact_morning":1,"contact_weekend":1},{"contact_noon":0,"phone_num_loc":"运营商","contact_3m":0,"contact_1m":0,"contact_1w":1,"p_relation":"","phone_num":"10086","contact_name":"中国移动客服热线","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"运营商","contact_weekday":1,"contact_afternoon":1,"call_len":3.4,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":3.4,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"短信通道","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"1062726666","contact_name":"未知","call_in_cnt":3,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":3,"contact_afternoon":3,"call_len":0.85,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":3,"call_cnt":3,"call_in_len":0.85,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13126992278","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":0.38333333333333336,"contact_holiday":1,"needs_type":"未知","contact_weekday":0,"contact_afternoon":1,"call_len":0.38333333333333336,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":1,"contact_1w":0,"p_relation":"","phone_num":"13146171468","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":0,"contact_afternoon":0,"call_len":0.15,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.15,"contact_all_day":false,"contact_morning":1,"contact_weekend":1},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13263177281","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":1.6333333333333333,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":1.6333333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13269107305","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":2.1,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":2.1,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":7,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13439660605","contact_name":"未知","call_in_cnt":4,"call_out_cnt":7,"call_out_len":7.633333333333334,"contact_holiday":0,"needs_type":"未知","contact_weekday":9,"contact_afternoon":9,"call_len":12.283333333333335,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":4,"call_cnt":11,"call_in_len":4.65,"contact_all_day":false,"contact_morning":1,"contact_weekend":2},{"contact_noon":0,"phone_num_loc":"湖南","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13517335184","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":24.283333333333335,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":24.283333333333335,"contact_early_morning":0,"contact_night":1,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13520866943","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":0.5,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.5,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":6,"phone_num_loc":"北京","contact_3m":0,"contact_1m":1,"contact_1w":0,"p_relation":"","phone_num":"13581838151","contact_name":"未知","call_in_cnt":6,"call_out_cnt":7,"call_out_len":13.6,"contact_holiday":0,"needs_type":"未知","contact_weekday":4,"contact_afternoon":1,"call_len":19.3,"contact_early_morning":0,"contact_night":2,"contact_3m_plus":12,"call_cnt":13,"call_in_len":5.7,"contact_all_day":true,"contact_morning":4,"contact_weekend":9},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13611222499","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":1.15,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":1.15,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":2,"phone_num_loc":"北京","contact_3m":2,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13651037207","contact_name":"未知","call_in_cnt":1,"call_out_cnt":1,"call_out_len":0.35,"contact_holiday":0,"needs_type":"未知","contact_weekday":2,"contact_afternoon":0,"call_len":1.6333333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":2,"call_in_len":1.2833333333333334,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13681358224","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":1.5166666666666666,"contact_holiday":0,"needs_type":"未知","contact_weekday":0,"contact_afternoon":0,"call_len":1.5166666666666666,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":1,"contact_weekend":1},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13693015932","contact_name":"未知","call_in_cnt":5,"call_out_cnt":1,"call_out_len":0.2,"contact_holiday":0,"needs_type":"未知","contact_weekday":3,"contact_afternoon":4,"call_len":12.883333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":6,"call_cnt":6,"call_in_len":12.683333333333334,"contact_all_day":false,"contact_morning":1,"contact_weekend":3},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13716317257","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":1.6666666666666667,"contact_holiday":0,"needs_type":"未知","contact_weekday":0,"contact_afternoon":1,"call_len":1.6666666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":1},{"contact_noon":2,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13810562637","contact_name":"未知","call_in_cnt":5,"call_out_cnt":4,"call_out_len":3.75,"contact_holiday":0,"needs_type":"未知","contact_weekday":6,"contact_afternoon":3,"call_len":18.066666666666666,"contact_early_morning":0,"contact_night":3,"contact_3m_plus":9,"call_cnt":9,"call_in_len":14.316666666666666,"contact_all_day":true,"contact_morning":1,"contact_weekend":3},{"contact_noon":3,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13810616824","contact_name":"未知","call_in_cnt":0,"call_out_cnt":3,"call_out_len":4.466666666666667,"contact_holiday":0,"needs_type":"未知","contact_weekday":3,"contact_afternoon":0,"call_len":4.466666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":3,"call_cnt":3,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13810908856","contact_name":"未知","call_in_cnt":0,"call_out_cnt":3,"call_out_len":1.9,"contact_holiday":0,"needs_type":"未知","contact_weekday":3,"contact_afternoon":3,"call_len":1.9,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":3,"call_cnt":3,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":2,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13811566940","contact_name":"未知","call_in_cnt":2,"call_out_cnt":1,"call_out_len":2.4833333333333334,"contact_holiday":2,"needs_type":"未知","contact_weekday":1,"contact_afternoon":2,"call_len":9.8,"contact_early_morning":0,"contact_night":1,"contact_3m_plus":1,"call_cnt":3,"call_in_len":7.316666666666666,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13811892396","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.9833333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.9833333333333333,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13811922910","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.35,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.35,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13910737670","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":0.6833333333333333,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":0.6833333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"河北","contact_3m":2,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"13931540483","contact_name":"未知","call_in_cnt":0,"call_out_cnt":2,"call_out_len":1.6166666666666667,"contact_holiday":0,"needs_type":"未知","contact_weekday":2,"contact_afternoon":0,"call_len":1.6166666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":2,"call_in_len":0.0,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"宁夏","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"15009698909","contact_name":"未知","call_in_cnt":3,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":3,"contact_afternoon":0,"call_len":5.15,"contact_early_morning":0,"contact_night":3,"contact_3m_plus":3,"call_cnt":3,"call_in_len":5.15,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":2,"phone_num_loc":"北京","contact_3m":2,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"15010120084","contact_name":"刘先生(个人)","call_in_cnt":2,"call_out_cnt":1,"call_out_len":0.2833333333333333,"contact_holiday":0,"needs_type":"未知","contact_weekday":3,"contact_afternoon":0,"call_len":0.8833333333333333,"contact_early_morning":0,"contact_night":1,"contact_3m_plus":1,"call_cnt":3,"call_in_len":0.6,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"15011387390","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":0.65,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":0.65,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":2,"phone_num_loc":"河北","contact_3m":4,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"15081915393","contact_name":"未知","call_in_cnt":6,"call_out_cnt":2,"call_out_len":20.116666666666667,"contact_holiday":4,"needs_type":"未知","contact_weekday":2,"contact_afternoon":4,"call_len":38.85,"contact_early_morning":0,"contact_night":2,"contact_3m_plus":4,"call_cnt":8,"call_in_len":18.733333333333334,"contact_all_day":false,"contact_morning":0,"contact_weekend":2},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"15210893089","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":1.2,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":1.2,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"河北","contact_3m":4,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"15230915925","contact_name":"未知","call_in_cnt":0,"call_out_cnt":5,"call_out_len":8.7,"contact_holiday":0,"needs_type":"未知","contact_weekday":5,"contact_afternoon":1,"call_len":8.7,"contact_early_morning":0,"contact_night":2,"contact_3m_plus":1,"call_cnt":5,"call_in_len":0.0,"contact_all_day":false,"contact_morning":2,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"15300077075","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.6166666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.6166666666666667,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":2,"phone_num_loc":"北京","contact_3m":1,"contact_1m":2,"contact_1w":0,"p_relation":"","phone_num":"15652751705","contact_name":"未知","call_in_cnt":6,"call_out_cnt":2,"call_out_len":12.983333333333333,"contact_holiday":0,"needs_type":"未知","contact_weekday":4,"contact_afternoon":2,"call_len":57.21666666666667,"contact_early_morning":0,"contact_night":1,"contact_3m_plus":5,"call_cnt":8,"call_in_len":44.233333333333334,"contact_all_day":true,"contact_morning":3,"contact_weekend":4},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"15810969920","contact_name":"未知","call_in_cnt":3,"call_out_cnt":6,"call_out_len":3.066666666666667,"contact_holiday":0,"needs_type":"未知","contact_weekday":0,"contact_afternoon":4,"call_len":4.983333333333333,"contact_early_morning":0,"contact_night":2,"contact_3m_plus":9,"call_cnt":9,"call_in_len":1.9166666666666667,"contact_all_day":false,"contact_morning":3,"contact_weekend":9},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":6,"contact_1m":2,"contact_1w":0,"p_relation":"","phone_num":"15811353154","contact_name":"未知","call_in_cnt":6,"call_out_cnt":2,"call_out_len":2.3666666666666667,"contact_holiday":3,"needs_type":"未知","contact_weekday":5,"contact_afternoon":3,"call_len":12.683333333333334,"contact_early_morning":0,"contact_night":1,"contact_3m_plus":0,"call_cnt":8,"call_in_len":10.316666666666666,"contact_all_day":true,"contact_morning":3,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"15901346992","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":0,"contact_afternoon":0,"call_len":0.5666666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.5666666666666667,"contact_all_day":false,"contact_morning":0,"contact_weekend":1},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":1,"contact_1w":0,"p_relation":"","phone_num":"17701200070","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":3.816666666666667,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":3.816666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18010217908","contact_name":"未知","call_in_cnt":2,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":2,"contact_afternoon":1,"call_len":0.55,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":2,"call_cnt":2,"call_in_len":0.55,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18511835773","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":1.5166666666666666,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":1.5166666666666666,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18515522815","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.18333333333333332,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.18333333333333332,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"上海","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18521361026","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.8166666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.8166666666666667,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18600472867","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":0.5166666666666667,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.5166666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18600628390","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":0.7166666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.7166666666666667,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":2,"phone_num_loc":"北京","contact_3m":2,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18600988991","contact_name":"未知","call_in_cnt":1,"call_out_cnt":2,"call_out_len":0.8833333333333333,"contact_holiday":0,"needs_type":"未知","contact_weekday":3,"contact_afternoon":1,"call_len":2.3,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":3,"call_in_len":1.4166666666666667,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":1,"contact_1m":5,"contact_1w":0,"p_relation":"","phone_num":"18610824705","contact_name":"未知","call_in_cnt":3,"call_out_cnt":3,"call_out_len":2.1666666666666665,"contact_holiday":1,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":6.283333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":6,"call_in_len":4.116666666666666,"contact_all_day":false,"contact_morning":5,"contact_weekend":4},{"contact_noon":21,"phone_num_loc":"北京","contact_3m":31,"contact_1m":3,"contact_1w":0,"p_relation":"","phone_num":"18611393792","contact_name":"未知","call_in_cnt":62,"call_out_cnt":48,"call_out_len":24.283333333333335,"contact_holiday":5,"needs_type":"未知","contact_weekday":79,"contact_afternoon":40,"call_len":54.45,"contact_early_morning":1,"contact_night":32,"contact_3m_plus":76,"call_cnt":110,"call_in_len":30.166666666666668,"contact_all_day":true,"contact_morning":16,"contact_weekend":26},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18611559030","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":2.2,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":2.2,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18618208009","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.4,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.4,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"浙江","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18658178662","contact_name":"未知","call_in_cnt":0,"call_out_cnt":1,"call_out_len":3.533333333333333,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":3.533333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":1,"contact_1w":0,"p_relation":"","phone_num":"18801344288","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":0,"contact_afternoon":0,"call_len":1.9166666666666667,"contact_early_morning":0,"contact_night":1,"contact_3m_plus":0,"call_cnt":1,"call_in_len":1.9166666666666667,"contact_all_day":false,"contact_morning":0,"contact_weekend":1},{"contact_noon":0,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18910349874","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":3.2333333333333334,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":3.2333333333333334,"contact_all_day":false,"contact_morning":1,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"北京","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"18910986968","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.13333333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.13333333333333333,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"全国","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"4001007664","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.4166666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.4166666666666667,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"全国","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"4001012245","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":0.016666666666666666,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.016666666666666666,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":2,"phone_num_loc":"全国","contact_3m":0,"contact_1m":2,"contact_1w":0,"p_relation":"","phone_num":"4008100120","contact_name":"爱康国宾(南京路吉利大厦店)","call_in_cnt":0,"call_out_cnt":2,"call_out_len":2.216666666666667,"contact_holiday":0,"needs_type":"未知","contact_weekday":0,"contact_afternoon":0,"call_len":2.216666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":2,"call_in_len":0.0,"contact_all_day":false,"contact_morning":0,"contact_weekend":2},{"contact_noon":0,"phone_num_loc":"全国","contact_3m":1,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"4008300820","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":0.1,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.1,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"全国","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"4008896333","contact_name":"骚扰电话","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"骚扰电话","contact_weekday":1,"contact_afternoon":1,"call_len":0.03333333333333333,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.03333333333333333,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":0,"phone_num_loc":"全国","contact_3m":0,"contact_1m":1,"contact_1w":0,"p_relation":"","phone_num":"4009992734","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":1,"call_len":0.11666666666666667,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":0,"call_cnt":1,"call_in_len":0.11666666666666667,"contact_all_day":false,"contact_morning":0,"contact_weekend":0},{"contact_noon":1,"phone_num_loc":"未知","contact_3m":0,"contact_1m":0,"contact_1w":0,"p_relation":"","phone_num":"未知","contact_name":"未知","call_in_cnt":1,"call_out_cnt":0,"call_out_len":0.0,"contact_holiday":0,"needs_type":"未知","contact_weekday":1,"contact_afternoon":0,"call_len":0.55,"contact_early_morning":0,"contact_night":0,"contact_3m_plus":1,"call_cnt":1,"call_in_len":0.55,"contact_all_day":false,"contact_morning":0,"contact_weekend":0}],"data_source":[{"status":"valid","account":"13581524051","binding_time":"2015-06-02 18:33:20","name":"北京移动","category_value":"移动运营商","reliability":"非实名认证","key":"chinamobilebj","category_name":"mobile"}],"behavior_check":[{"check_point":"朋友圈在哪里","score":0,"result":"无数据","evidence":"未提供居住地址"},{"check_point":"本地居住年限","score":0,"result":"无数据","evidence":"未提供居住地址"},{"check_point":"关机情况","score":2,"result":"关机共55天","evidence":"根据运营商详单数据，160天内关机55天，连续三天以上关机3次: 2015-08-26 - 2015-08-29, 4天 / 2015-09-22 - 2015-09-25, 4天 / 2015-10-21 - 2015-10-24, 4天"},{"check_point":"澳门电话通话情况","score":1,"result":"无通话记录","evidence":"未发现澳门地区电话通话记录"},{"check_point":"申请人的学籍状态是否为在校学生","score":0,"result":"无数据","evidence":"未提供学信网数据"},{"check_point":"申请人的学历情况","score":0,"result":"无数据","evidence":"未提供学历数据"},{"check_point":"110话通话情况","score":1,"result":"无通话记录","evidence":"未发现与110电话通话记录"},{"check_point":"120话通话情况","score":1,"result":"无通话记录","evidence":"未发现与120电话通话记录"},{"check_point":"律师号码通话情况","score":1,"result":"无通话记录","evidence":"未发现与律师电话通话记录"},{"check_point":"法院号码通话情况","score":1,"result":"无通话记录","evidence":"未发现与法院电话通话记录"},{"check_point":"号码使用时间","score":1,"result":"至少使用了3个月以上但不足半年","evidence":"运营商未提供号码注册时间, 根据运营商数据[13581524051]号码使用了5个月"},{"check_point":"互通过电话的号码数量","score":1,"result":"数量正常","evidence":"互通过电话的号码有14个"},{"check_point":"与联系人互动情况","score":0,"result":"无数据","evidence":"未提供联系人信息"},{"check_point":"总体电商使用情况","score":0,"result":"无数据","evidence":"未提供电商数据"},{"check_point":"申请人本人电商使用情况","score":0,"result":"无数据","evidence":"未提供电商数据"},{"check_point":"虚拟商品购买情况","score":0,"result":"无数据","evidence":"未提供电商数据"},{"check_point":"彩票购买情况","score":0,"result":"无数据","evidence":"未提供电商数据"},{"check_point":"申请人本人地址变化情况","score":0,"result":"无数据","evidence":"未提供电商数据"},{"check_point":"申请人本人最近使用工作地址情况","score":0,"result":"无数据","evidence":"未提供电商数据"},{"check_point":"申请人本人最近使用居住地址情况","score":0,"result":"无数据","evidence":"未提供电商数据"},{"check_point":"申请人本人最近使用学校地址情况","score":0,"result":"无数据","evidence":"未提供电商数据"},{"check_point":"居住地址定位","score":0,"result":"无数据","evidence":"未提供居住地址"},{"check_point":"工作地址定位","score":0,"result":"无数据","evidence":"未提供工作地址"},{"check_point":"夜间活动情况","score":1,"result":"很少夜间活动","evidence":"晚间活跃频率占全天的3.5%"},{"check_point":"贷款类号码联系情况","score":1,"result":"无该类号码记录","evidence":"未找到贷款类相关号码"},{"check_point":"银行类号码联系情况","score":1,"result":"无该类号码记录","evidence":"未找到银行类相关号码"},{"check_point":"信用卡类号码联系情况","score":1,"result":"无该类号码记录","evidence":"未找到信用卡类相关号码"}],"collection_contact":[],"trip_consume":[],"ebusiness_expense":[],"person":{"province":"江苏省","city":"南京市","gender":"男","age":22,"sign":"狮子座","state":"江苏省","status":false,"real_name":"刘小鸿","region":"白下区","id_card_num":"320103199308042318"},"main_service":[],"contact_region":[{"region_loc":"上海","region_uniq_num_cnt":1,"region_call_out_time":0.0,"region_avg_call_in_time":0.8166666666666667,"region_call_in_time":0.8166666666666667,"region_call_out_cnt":0,"region_avg_call_out_time":0,"region_call_in_cnt_pct":0.006329113924050633,"region_call_in_time_pct":0.004143763213530655,"region_call_in_cnt":1,"region_call_out_time_pct":0.0,"region_call_out_cnt_pct":0.0},{"region_loc":"全国","region_uniq_num_cnt":6,"region_call_out_time":2.216666666666667,"region_avg_call_in_time":0.13666666666666666,"region_call_in_time":0.6833333333333333,"region_call_out_cnt":2,"region_avg_call_out_time":1.1083333333333334,"region_call_in_cnt_pct":0.03164556962025317,"region_call_in_time_pct":0.00346723044397463,"region_call_in_cnt":5,"region_call_out_time_pct":0.014350453172205438,"region_call_out_cnt_pct":0.017241379310344827},{"region_loc":"北京","region_uniq_num_cnt":55,"region_call_out_time":94.0,"region_avg_call_in_time":1.2258024691358023,"region_call_in_time":165.48333333333332,"region_call_out_cnt":103,"region_avg_call_out_time":0.912621359223301,"region_call_in_cnt_pct":0.8544303797468354,"region_call_in_time_pct":0.8396617336152219,"region_call_in_cnt":135,"region_call_out_time_pct":0.6085455330168321,"region_call_out_cnt_pct":0.8879310344827587},{"region_loc":"宁夏","region_uniq_num_cnt":1,"region_call_out_time":0.0,"region_avg_call_in_time":1.7166666666666668,"region_call_in_time":5.15,"region_call_out_cnt":0,"region_avg_call_out_time":0,"region_call_in_cnt_pct":0.0189873417721519,"region_call_in_time_pct":0.02613107822410148,"region_call_in_cnt":3,"region_call_out_time_pct":0.0,"region_call_out_cnt_pct":0.0},{"region_loc":"广东","region_uniq_num_cnt":1,"region_call_out_time":0.0,"region_avg_call_in_time":0.4666666666666667,"region_call_in_time":0.9333333333333333,"region_call_out_cnt":0,"region_avg_call_out_time":0,"region_call_in_cnt_pct":0.012658227848101266,"region_call_in_time_pct":0.004735729386892177,"region_call_in_cnt":2,"region_call_out_time_pct":0.0,"region_call_out_cnt_pct":0.0},{"region_loc":"未知","region_uniq_num_cnt":2,"region_call_out_time":0.0,"region_avg_call_in_time":0.5166666666666667,"region_call_in_time":1.0333333333333334,"region_call_out_cnt":0,"region_avg_call_out_time":0,"region_call_in_cnt_pct":0.012658227848101266,"region_call_in_time_pct":0.005243128964059197,"region_call_in_cnt":2,"region_call_out_time_pct":0.0,"region_call_out_cnt_pct":0.0},{"region_loc":"河北","region_uniq_num_cnt":3,"region_call_out_time":30.433333333333334,"region_avg_call_in_time":3.1222222222222222,"region_call_in_time":18.733333333333334,"region_call_out_cnt":9,"region_avg_call_out_time":3.3814814814814813,"region_call_in_cnt_pct":0.0379746835443038,"region_call_in_time_pct":0.09505285412262156,"region_call_in_cnt":6,"region_call_out_time_pct":0.197022011221407,"region_call_out_cnt_pct":0.07758620689655173},{"region_loc":"浙江","region_uniq_num_cnt":1,"region_call_out_time":3.533333333333333,"region_avg_call_in_time":0,"region_call_in_time":0.0,"region_call_out_cnt":1,"region_avg_call_out_time":3.533333333333333,"region_call_in_cnt_pct":0.0,"region_call_in_time_pct":0.0,"region_call_in_cnt":0,"region_call_out_time_pct":0.022874406560207162,"region_call_out_cnt_pct":0.008620689655172414},{"region_loc":"湖南","region_uniq_num_cnt":1,"region_call_out_time":24.283333333333335,"region_avg_call_in_time":0,"region_call_in_time":0.0,"region_call_out_cnt":1,"region_avg_call_out_time":24.283333333333335,"region_call_in_cnt_pct":0.0,"region_call_in_time_pct":0.0,"region_call_in_cnt":0,"region_call_out_time_pct":0.1572075960293483,"region_call_out_cnt_pct":0.008620689655172414},{"region_loc":"短信通道","region_uniq_num_cnt":1,"region_call_out_time":0.0,"region_avg_call_in_time":0.2833333333333333,"region_call_in_time":0.85,"region_call_out_cnt":0,"region_avg_call_out_time":0,"region_call_in_cnt_pct":0.0189873417721519,"region_call_in_time_pct":0.004312896405919662,"region_call_in_cnt":3,"region_call_out_time_pct":0.0,"region_call_out_cnt_pct":0.0},{"region_loc":"运营商","region_uniq_num_cnt":1,"region_call_out_time":0.0,"region_avg_call_in_time":3.4,"region_call_in_time":3.4,"region_call_out_cnt":0,"region_avg_call_out_time":0,"region_call_in_cnt_pct":0.006329113924050633,"region_call_in_time_pct":0.017251585623678647,"region_call_in_cnt":1,"region_call_out_time_pct":0.0,"region_call_out_cnt_pct":0.0}],"application_check":[{"check_point":"是否绑定运营商","score":1,"result":"完成绑定","evidence":"已绑定[1]个手机号码"},{"check_point":"是否绑定电商","score":0,"result":"未绑定","evidence":"未绑定电商"},{"check_point":"是否绑定出行网站","score":0,"result":"未绑定","evidence":"未绑定出行网站"},{"check_point":"是否绑定学信网","score":0,"result":"未绑定","evidence":"未绑定学信网"},{"check_point":"是否绑定公积金","score":0,"result":"未绑定","evidence":"未绑定公积金"},{"check_point":"是否提交登记号码信息","score":1,"result":"提交了登记号码","evidence":"收集到号码[13581524051]的信息"},{"check_point":"身份证号码是否有效","score":2,"result":"未通过检验","evidence":"未通过国标身份证验证算法"},{"check_point":"姓名是否与运营商数据匹配","score":2,"result":"匹配失败","evidence":"与运营商提供的姓名不匹配,姓名:李景"},{"check_point":"身份证号码是否与运营商数据匹配","score":0,"result":"无数据","evidence":"运营商未提供身份证号码"},{"check_point":"姓名是否与学信网数据匹配","score":0,"result":"无数据","evidence":"未提供学信网数据"},{"check_point":"身份证号码是否与学信网数据匹配","score":0,"result":"无数据","evidence":"未提供学信网数据"},{"check_point":"姓名是否与公积金数据匹配","score":0,"result":"无数据","evidence":"未提供公积金数据"},{"check_point":"身份证号码是否与公积金数据匹配","score":0,"result":"无数据","evidence":"未提供公积金数据"},{"check_point":"申请人姓名+身份证是否出现在法院黑名单","score":1,"result":"未出现","evidence":"申请人未出现在法院黑名单中"},{"check_point":"申请人姓名+身份证是否出现在金融服务类机构黑名单","score":1,"result":"未出现","evidence":"申请人未出现在金融服务类机构黑名单中"},{"check_point":"申请人姓名+手机号码是否出现在金融服务类机构黑名单","score":1,"result":"未出现","evidence":"申请人未出现在金融服务类机构黑名单中"},{"check_point":"是否呼叫过联系人","score":0,"result":"无数据","evidence":"未提供任何联系人信息"},{"check_point":"是否呼叫过住所电话","score":0,"result":"无数据","evidence":"未提供住所电话"},{"check_point":"是否呼叫过工作电话","score":0,"result":"无数据","evidence":"未提供工作电话"},{"check_point":"绑定电话是否在电商中使用过","score":0,"result":"无数据","evidence":"未提供电商数据"},{"check_point":"工作地址是否在有效的收货地址中使用过","score":0,"result":"无数据","evidence":"未提供工作地址"},{"check_point":"居住地址是否在有效的收货地址中使用过","score":0,"result":"无数据","evidence":"未提供居住地址"}],"deliver_address":[],"report":{"token":"8812a42b649b4352a57f90a00604f860","updt":{"$date":"2015-11-17T02:03:57.000Z"},"id":"201511171003578953","version":"4.1"},"trip_info":[],"_id":"564a8b8cda6d2814cffeb4ca","cell_behavior":[{"phone_num":"13581524051","behavior":[{"sms_cnt":0,"cell_phone_num":"13581524051","net_flow":0.0,"total_amount":-1.0,"call_out_time":0.0,"cell_mth":"2015-11","cell_loc":"北京","call_cnt":7,"cell_operator_zh":"北京移动","call_out_cnt":0,"cell_operator":"chinamobilebj","call_in_time":4.733333333333333,"call_in_cnt":7},{"sms_cnt":9,"cell_phone_num":"13581524051","net_flow":0.0,"total_amount":60.0,"call_out_time":14.65,"cell_mth":"2015-10","cell_loc":"北京","call_cnt":45,"cell_operator_zh":"北京移动","call_out_cnt":16,"cell_operator":"chinamobilebj","call_in_time":45.45,"call_in_cnt":29},{"sms_cnt":20,"cell_phone_num":"13581524051","net_flow":0.0,"total_amount":60.0,"call_out_time":18.216666666666665,"cell_mth":"2015-09","cell_loc":"北京","call_cnt":41,"cell_operator_zh":"北京移动","call_out_cnt":22,"cell_operator":"chinamobilebj","call_in_time":17.85,"call_in_cnt":19},{"sms_cnt":26,"cell_phone_num":"13581524051","net_flow":0.0,"total_amount":60.0,"call_out_time":18.883333333333333,"cell_mth":"2015-08","cell_loc":"北京","call_cnt":37,"cell_operator_zh":"北京移动","call_out_cnt":15,"cell_operator":"chinamobilebj","call_in_time":17.216666666666665,"call_in_cnt":22},{"sms_cnt":56,"cell_phone_num":"13581524051","net_flow":0.0,"total_amount":60.0,"call_out_time":36.61666666666667,"cell_mth":"2015-07","cell_loc":"北京","call_cnt":101,"cell_operator_zh":"北京移动","call_out_cnt":35,"cell_operator":"chinamobilebj","call_in_time":79.5,"call_in_cnt":66},{"sms_cnt":15,"cell_phone_num":"13581524051","net_flow":0.0,"total_amount":61.38,"call_out_time":66.1,"cell_mth":"2015-06","cell_loc":"北京","call_cnt":43,"cell_operator_zh":"北京移动","call_out_cnt":28,"cell_operator":"chinamobilebj","call_in_time":32.333333333333336,"call_in_cnt":15}]}]},"LOAN_APP_ID":"1","CUST_NAME":"刘小鸿"}',
        );
        return $d['data'];
    }

    /**
     * 废弃 获取加密密钥
     */
    private function encryptData($aid, $res_data) {
        $appData = (new App())->getById($aid);
        if (empty($appData)) {
            return null;
        }
        if (empty($res_data)) {
            return null;
        }

        // 加密信息
        try {
            return (new ApiServerCrypt())->buildData($res_data, $appData->auth_key);
        } catch (\Exception $e) {
            // log_here
            return null;
        }
    }

}
